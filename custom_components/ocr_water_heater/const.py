"""Constants for the OCR Water Heater integration."""
from homeassistant.const import Platform

DOMAIN = "ocr_water_heater"
DEFAULT_NAME = "Smart Water Heater"
PLATFORMS: list[Platform] = [Platform.WATER_HEATER]

# === 工作模式常量 ===
MODE_LOW_POWER = "低功率"
MODE_HALF = "速热半缸"
MODE_FULL = "速热全缸"
MODE_STANDBY = "待机"
MODE_SETTING = "正在设置"
MODE_OFF = "关闭"

# === ROI 区域配置 ===
DEFAULT_ROI_PANEL = (728, 335, 119, 30)
DEFAULT_ROI_OCR = (769, 339, 36, 26)
DEFAULT_ROI = DEFAULT_ROI_OCR

DEFAULT_ROI_SETTING = (775, 336, 11, 7)
DEFAULT_ROI_LOW     = (733, 340, 13, 5)
DEFAULT_ROI_HALF    = (733, 350, 13, 5)
DEFAULT_ROI_FULL    = (733, 359, 13, 5)

# === 参数配置 ===
DEFAULT_SKEW = 8.0
DEFAULT_UPDATE_INTERVAL = 1000
DEFAULT_DEBUG_MODE = False
DEFAULT_GAMMA = 2.0
DEFAULT_NOISE_LIMIT = 20

# === 配置键名 ===
CONF_IMAGE_URL = "image_url"
CONF_UPDATE_INTERVAL = "update_interval"
CONF_DEBUG_MODE = "debug_mode"
CONF_SKEW = "skew_angle"
CONF_GAMMA = "gamma"
CONF_MIIO_IP = "miio_ip"
CONF_MIIO_TOKEN = "miio_token"

CONF_PANEL_X, CONF_PANEL_Y, CONF_PANEL_W, CONF_PANEL_H = "panel_x", "panel_y", "panel_w", "panel_h"
CONF_OCR_X, CONF_OCR_Y, CONF_OCR_W, CONF_OCR_H = "ocr_x", "ocr_y", "ocr_w", "ocr_h"
CONF_SET_X, CONF_SET_Y, CONF_SET_W, CONF_SET_H = "set_x", "set_y", "set_w", "set_h"
CONF_LOW_X, CONF_LOW_Y, CONF_LOW_W, CONF_LOW_H = "low_x", "low_y", "low_w", "low_h"
CONF_HALF_X, CONF_HALF_Y, CONF_HALF_W, CONF_HALF_H = "half_x", "half_y", "half_w", "half_h"
CONF_FULL_X, CONF_FULL_Y, CONF_FULL_W, CONF_FULL_H = "full_x", "full_y", "full_w", "full_h"

# === 算法常量 ===
RESIZE_FACTOR = 5.0
SIDE_CROP_PIXELS = 4
UNSHARP_AMOUNT = 2.0
VALID_MIN = 10
VALID_MAX = 80
MODE_A_SMART_SLIM = True
MODE_A_SLIM_THRESHOLD = 0.30
MODE_A_FORCE_ERODE = False
OCR_MIN_PEAK_BRIGHTNESS = 60
MODE_ACTIVE_RATIO = 0.20

# === 生产环境路径修正 ===
# 指向 /config/www/ocr_debug (HA 标准配置目录)
# 这样可以通过 http://<ha-ip>:8123/local/ocr_debug/ 访问图片
#DEBUG_DIR_ROOT = "/config/www/ocr_debug"

# --- MIIO COMMANDS ---
CMD_METHOD_IR = "send_ir_code"
CMD_METHOD_ELE = "send_other_ele_cmd"

CMD_VAL_SCREEN_ON = ["FE00000000000094701fff7a0107002427ed003600AB00DF01C403850F9B1388430000000101000100010101000001000100010100010000000100000100010101054206F2"]
CMD_VAL_TEMP_UP = ["00000c00d0135500032100040ED8010010390016001500160040010004015A00AD00000106015A00560015050058A701FE"]
CMD_VAL_TEMP_DOWN = ["00000c00d0135500042100040ED8010010390016001500160040010004015A00AD00000106015A00560015050058A703FC"]
CMD_VAL_TOGGLE = ["00000c00d0135500012100040ED8010010390016001500160040010004015A00AD00000106015A00560015050058A700FF"]
CMD_VAL_MODE = ["FE00000000000094701fff790107002427ec003600AB00E001C403850F9C1388430000000101000100010101000001000100010000000000000100010101010101054206F4"]

SCREEN_KEEP_ALIVE_INTERVAL = 30
TARGET_TEMP_SYNC_INTERVAL = 600


# 调试输出目录
DEBUG_DIR_ROOT = "/workspaces/core/tmp/ocr_debug"
